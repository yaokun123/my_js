<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .red{color: red;}
        .img{width: 500px;height: 300px;}
    </style>
</head>
<body>
<div>
    <h1>一、邂逅红黑树</h1>
    <div>
        首先红黑树很难，难到什么程度呢？
        <ul>
            <li>基本你跟别人聊数据结构的时候，他不会和你聊红黑树，因为他是数据结构中的一个<span class="red">难点中的难点</span></li>
            <li>数据结构的学习本来就比较难了，红黑树是又将难度<span class="red">上升一个档次</span>的知识点</li>
        </ul>
    </div>

    <div>
        哪些面试会出现红黑树呢？
        <ul>
            <li>通常在比较知名的互联网公司面试时会出现红黑树的题目</li>
            <li>因为它可以作为你对数据结构掌握深度的很好考察点</li>
            <li>但是在除去大型互联网公司外，几乎不会考察到红黑树</li>
            <li>应为面试官很有可能自己都不懂</li>
        </ul>
    </div>
    <hr>

    <h1>二、红黑树的规则</h1>
    <div>
        红黑树，除了符合二叉搜索树的基本规则外，还添加了以下特性：
        <ul>
            <li>1、节点是红色或者黑色</li>
            <li>2、根结点是黑色</li>
            <li>3、每个叶子节点都是黑色的空节点(nil节点)</li>
            <li>4、每个红色节点的两个子节点都是黑色的。（从每个叶子到根的所有路径上不能有两个连续的红色节点）</li>
            <li>5、从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点</li>
        </ul>
        <img class="img" src="redblacktree.png" alt="">
    </div>
    <hr>

    <div>
        <h1>三、红黑树的相对平衡</h1>
        <div>
            前面的约束，确保了红黑树的关键特性：
            <ul>
                <li>从根到叶子的最长可能路径，不会超过最短可能路径的两倍长</li>
                <li>结果就是这个树<span class="red">基本</span>是平衡的</li>
                <li>虽然没有做到绝对的平衡，但是可以保证正在最坏的情况下，依然是高效的</li>
            </ul>
        </div>
    </div>

    <div>
        为什么可以做到<span class="red">最长路径不超过最短路径的两倍</span>呢？
        <ul>
            <li><span class="red">性质4</span>决定了路径不能有两个相连的红色节点</li>
            <li>最短的可能路径都是黑色节点</li>
            <li>最长的可能路径是红色和黑色交替</li>
            <li><span class="red">性质5</span>所有路径都有相同数目的黑色节点</li>
            <li>这就表明了没有路径能多于任何其他路径的两倍长</li>
        </ul>
    </div>
    <hr>

    <div>
        <h1>四、变色</h1>
        <div>
            插入一个新节点时，有可能树不再平衡，可以通过三种方式的变换，让树保持平衡
            <ul>
                <li>换色-左旋转-右旋转</li>
            </ul>
        </div>

        <div>
            变色：
            <ul>
                <li>为了重新符合红黑树的规则，尝试把<span class="red">红色节点</span>变成<span>黑色</span>，或者把黑色节点变成红色</li>
            </ul>
        </div>

        <div>
            首先，需要知道插入的 <span class="red">新的节点</span>通常都是 <span class="red">红色节点</span>
            <ul>
                <li>因为在插入节点为红色的时候，有可能插入一次是不违反红黑树任何规则的</li>
                <li>而插入黑色节点，必然会导致有一条路径上多了黑色节点，这是很难调整的</li>
                <li>红色节可能导致出现红红相连的情况，但是这种情况下可以通过颜色调换和旋转来调整</li>
            </ul>
        </div>
    </div>
    <hr>

    <div>
        <h1>五、旋转</h1>
        <div>
            左旋转

            <ul>
                <li>逆时针旋转红黑树的两个节点，使得父节点被自己的右孩子取代，而自己成为自己的左孩子</li>
                <li>图中，身为右孩子的Y取代了X的位置，而X变为Y的左孩子</li>
                <li>问题：如果他们有子树是否会影响旋转</li>
            </ul>
            <img class="img" src="leftChange.png" alt="">
        </div>
        <div>
            右旋转
            <ul>
                <li>顺时针旋转红黑树的两个节点，使得父节点被自己的左孩子取代，而自己成为做着自己的右孩子</li>
                <li>图中，身为左孩子的Y取代了X的位置，而X变为Y的右孩子</li>
                <li>问题：如果他们有子树是否会影响旋转</li>
            </ul>
            <img class="img" src="rightChange.png" alt="">
        </div>
    </div>
    <hr>

    <div>
        <h1>六、插入操作</h1>
        <div>
            接下来，讨论一下插入的情况
            <ul>
                <li>设要插入的节点为N，其父节点为P</li>
                <li>其祖父节点为G，其父亲的兄弟节点为U(即P和U是同一节点的子节点)</li>
            </ul>

            情况一：
            <ul>
                <li>新节点N位于树的根，没有父节点</li>
                <li>这种情况下，我们直接将红色变为黑色即可，这样满足特性2</li>
            </ul>

            情况二：
            <ul>
                <li>新节点的父节点P是黑色</li>
                <li>性质4没有失效（新节点是红色），性质5也没任何问题</li>
                <li>尽管新节点N有两个黑色的叶子节点nil，但是新节点N是红色的，所以通过它的路径中黑色节点的个数依然相同，满足性质5</li>
            </ul>

            情况三：
            <ul>
                <li>P为红色，U也是红色</li>

                操作方案：
                <ul>
                    <li>将P和U边换为黑色，并且将G变换为红色</li>
                    <li>现在新节点N有了一个黑色的父节点P，所以每条路径上黑色节点的数目没有改变</li>
                    <li>而从更高的路径上，必然都会经过G节点，所以那些路径的黑色节点数目也是不变的，符合性质5</li>
                </ul>

                可能出现的问题：
                <ul>
                    <li>但是，N的祖父节点G的父节点的父节点可能是红色，这就违反了性质4，可以递归调整颜色</li>
                    <li>但是如果递归调整颜色到了根结点，就需要进行旋转了，待会儿我们的例子中会遇到这个问题</li>
                </ul>
                <img class="img" src="three.png" alt="">
            </ul>
        </div>
    </div>
</div>
<script src="redBlackTree.js">
</script>

<script>

</script>

</body>
</html>